<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.sample1.mapper.AdminMapper">
	
	<select id="selectRequest" parameterType="hashmap" resultType="com.example.sample1.model.Admin">
	SELECT *
		FROM T2_PACKAGE_REQUEST_TBL P
		LEFT OUTER JOIN T2_ROOM_TBL S ON ROOM_NO = PRODUCT_NO AND PRODUCT_KIND = 'STAY'
		LEFT OUTER JOIN T2_RENT_CAR_TBL R ON RENT_NO = PRODUCT_NO AND PRODUCT_KIND = 'RENT'
		LEFT OUTER JOIN T2_LEISURE_TBL L ON LEISURE_NO = PRODUCT_NO AND PRODUCT_KIND = 'LEISURE';
	</select>
	
	<update id="requestApp" parameterType="hashmap">
	UPDATE T2_PACKAGE_REQUEST_TBL P
		LEFT OUTER JOIN T2_ROOM_TBL S ON ROOM_NO = PRODUCT_NO AND PRODUCT_KIND = 'STAY'
		LEFT OUTER JOIN T2_RENT_CAR_TBL R ON RENT_NO = PRODUCT_NO AND PRODUCT_KIND = 'RENT'
		LEFT OUTER JOIN T2_LEISURE_TBL L ON LEISURE_NO = PRODUCT_NO AND PRODUCT_KIND = 'LEISURE'
	SET 
		STATE = 'A'
	WHERE ROOM_NO = #{roomNo} 
	  AND RENT_NO = #{rentNo} 
	  AND LEISURE_NO = #{leisureNo};
	</update>
	
	<select id="rentRequest" parameterType="hashmap" resultType="com.example.sample1.model.Admin">
		SELECT * FROM T2_PACKAGE_REQUEST_TBL P
		INNER JOIN T2_RENT_CAR_TBL R ON R.RENT_NO = P.PRODUCT_NO; 
	</select>
	
	<select id="roomRequest" parameterType="hashmap" resultType="com.example.sample1.model.Admin">
		SELECT * FROM T2_PACKAGE_REQUEST_TBL P
		INNER JOIN T2_ROOM_TBL S ON S.ROOM_NO = P.PRODUCT_NO; 
	</select>
	
	<select id="leisureRequest" parameterType="hashmap" resultType="com.example.sample1.model.Admin">
		SELECT * FROM T2_PACKAGE_REQUEST_TBL P
		INNER JOIN T2_LEISURE_TBL L ON L.LEISURE_NO = P.PRODUCT_NO; 
	</select>
</mapper>