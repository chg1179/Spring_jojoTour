<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.sample1.mapper.MyPageMapper">
	<select id="selectOrder" parameterType="hashmap" resultType="com.example.sample1.model.MyPage">
		SELECT *
		FROM T2_ORDER_TBL
		WHERE U_ID = #{userId}
	</select>
	
	<select id="selectJjim" parameterType="hashmap" resultType="com.example.sample1.model.MyPage">
			SELECT DISTINCT *
			FROM T2_JJIM_TBL J
			LEFT JOIN T2_ROOM_TBL on room_no = product_no and product_kind = 'STAY'
			LEFT JOIN T2_RENT_CAR_TBL on rent_no = product_no and product_kind = 'RENT'
			LEFT JOIN T2_LEISURE_TBL on leisure_no = product_no and product_kind = 'LEISURE'
			WHERE J.U_ID = 'qkqh';
	</select>
	
	<select id="selectPoint" parameterType="hashmap" resultType="com.example.sample1.model.MyPage">
		SELECT *
		FROM T2_USER_POINT_TBL
		WHERE U_ID = #{userId}
	</select>
	<!-- 나의 리뷰 불러오기 -->
	<select id="selectReview" parameterType="hashmap" resultType="com.example.sample1.model.MyPage">
		SELECT *
		FROM T2_REVIEW_TBL
		WHERE U_ID = #{userId}
	</select>
    <!-- 나의 리뷰 카운트 -->
	<select id="selectReviewCnt" parameterType="hashmap" resultType="int">
		SELECT COUNT(*) AS CNT
		FROM T2_REVIEW_TBL
		WHERE U_ID = #{userId}
	</select>
	<!--나의 리뷰 삭제 -->
	<update id="deleteReview" parameterType="hashmap">
		UPDATE T2_REVIEW_TBL
		SET
			DELYN = 'Y'
		WHERE R_NO = #{rNo}
	</update>
	<!-- 나의 리뷰 수정창 -->
	<select id="selectReviewInfo" parameterType="hashmap" resultType="com.example.sample1.model.MyPage">
		SELECT *
		FROM T2_REVIEW_TBL
		WHERE R_NO = #{rNo}
	</select>
	<!-- 나의 리뷰 수정하기 -->
	<update id="editReview" parameterType="hashmap">
		UPDATE T2_REVIEW_TBL
		SET
			R_CONTENT = #{rContent},
			R_UPDATE_TIME = NOW()
		WHERE R_NO = #{rNo}
	</update>
	<!-- 나의 1:1문의 불러오기 -->
	<select id="selectInquiry" parameterType="hashmap" resultType="com.example.sample1.model.Inquiry">
		SELECT *
		FROM T2_INQUIRY_TBL
		WHERE U_ID = #{userId}
	</select>
	<!--나의 1:1문의 삭제 -->
	<update id="deleteInquiry" parameterType="hashmap">
		UPDATE T2_INQUIRY_TBL
		SET
			DELYN = 'Y'
		WHERE I_NO = #{iNo}
	</update>
	<!-- 나의 1:1문의 수정창 -->
	<select id="selectInquiryInfo" parameterType="hashmap" resultType="com.example.sample1.model.Inquiry">
		SELECT *
		FROM T2_INQUIRY_TBL
		WHERE I_NO = #{iNo}
	</select>
	<!-- 나의 1:1문의 수정하기 -->
	<update id="editInquiry" parameterType="hashmap">
		UPDATE T2_INQUIRY_TBL
		SET
			I_TITLE = #{iTitle},
			I_CONTENT = #{iContent},
			I_UPDATE_TIME = NOW()
		WHERE I_NO = #{iNo}
	</update>
</mapper>